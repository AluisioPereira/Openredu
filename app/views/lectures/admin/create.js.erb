<%= remotipart_response do %>
  <% if @lecture.valid? %>
    var $itemShort = $("<%= escape_javascript(render :partial => 'lectures/admin/item_short', :locals => { :item_short => @lecture }) %>");
    $('#resources_list').append($itemShort);

    $('.new-resource .resource-form').slideUp(function(){ $(this).remove(); });
    <%# Tira efeito de selecionado do choose_lectures %>
    $("#space-manage .new-resource .resources-types li").removeClass("selected");

    <% if @lecture.lectureable.is_a? Page %>
      var $editPageForm = $("<%= escape_javascript render 'lectures/admin/edit', :lecture => @lecture, :subject => @subject, :space => @space %>");
      $('#resources-edition').append($editPageForm);
    <% end %>

    $("#space-manage #resources_list").refreshResourcesNumbering();

    <%# Atualiza quotas %>
    var $quotas = $("<%= escape_javascript render 'subjects/admin/quotas', :quota => @quota, :plan => @plan %>");
    $("#space-manage .concave-form .quotas").replaceWith($quotas);
  <% else %>
    <%# Mostra form com erros de validação %>
    var $newForm = $("<%= escape_javascript(render 'lectures/admin/form', :space => @space, :subject => @subject, :lecture => @lecture) %>");
    $('.new-resource .resource-form').replaceWith($newForm);
    $('.new-resource .resource-form').show();
  <% end %>
<% end %>
