<% if @lecture.valid? %>
  var $lectureItem = $("<%= escape_javascript(render :partial => 'lectures/admin/item_short', :locals => { :item_short => @lecture}) %>");

  <% # Insere novo item mantendo a ordem dele na lista %>
  var $editingItem = $('#<%= @lecture.id %>-item');
  $editingItem.after($lectureItem);
  $editingItem.remove();

  <% if @lecture.lectureable.is_a? Page %>
    var $editPageForm = $("<%= escape_javascript render 'lectures/admin/edit', :lecture => @lecture, :subject => @subject, :space => @space %>");
    $('#<%= @lecture.id %>-item-edition').replaceWith($editPageForm);
  <% end %>

  $("#space-manage #resources_list").refreshResourcesNumbering();
<% else %>
  var $form = $("#<%= @lecture.id %>-item-edition");
  <% if @lecture.lectureable.is_a? Page %>
    var $editPageForm = $("<%= escape_javascript render 'lectures/admin/edit', :lecture => @lecture, :subject => @subject, :space => @space %>");
    $form.replaceWith($editPageForm);
    $editPageForm.show()
  <% end %>
<% end %>
