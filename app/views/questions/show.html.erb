<%= render :partial => 'lectures/javascripts' %>
<%= render :partial => 'subjects/sidebar' %>
<div class="main space grid_12 omega big-col">
  <%= render :partial => "subjects/breadcrumbs", :locals => { :subject => @subject } %>
  <%= render :partial => 'subjects/header',
    :locals => { :subject => @subject, :space => @space } %>

  <div id="resource" class="hierarchy-listing-wrapper">
    <div class="resource-head">
      <%= render :partial => 'lectures/info',
        :locals => { :lecture => @lecture } %>
      <%= render :partial => 'lectures/context',
        :locals => { :student_grade => @student_grade, :done => @done } %>
    </div>

    <div class="resource-content clearfix">
      <%= render :partial => 'lectures/details',
        :locals => { :lecture => @lecture} %>
      <div class="stage exercise">
        <% if @question.last_item? && !@review %>
          <%= form_tag exercise_result_path(@exercise, @exercise.result_for(current_user, false)), :method => :put do %>
            <button type="submit" class="concave-button">
              <span class="do-exercise icon-exercise-white_16_18-before">Finalizar</span>
            </button>
          <% end %>
        <% end %>
        <%= form_for :choice, :url => exercise_question_choices_path(@exercise, @question), :method => :post do |f| %>
          <%= render"questions/navigation",
            :f => f, :exercise => @exercise, :current => @question, :first => @first_question, :last => @last_question, :review => @review %>
          <div class="question">
            <p><%= @question.statement %></p>
          </div>

          <% if @review %>
            <div class="justification">
              <span class="call">Justificativa:</span>
              <p><%= @question.explanation || "Não há" %></p>
            </div>
            <div class="alternatives review">
              <ol>
                <% @question.alternatives.each_with_index do |alternative, index| %>
                  <%= render 'alternatives/answered', :index => index, :alternative => alternative, :choosed => @choice.alternative %>
                <% end %>
              </ol>
            </div>
          <% else %>
            <div class="alternatives">
              <ol>
                <% @question.alternatives.each_with_index do |alternative, index| %>
                  <%= render 'alternatives/item', :f => f, :index => index, :alternative => alternative %>
                <% end %>
              </ol>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>

  </div><!-- end #resource -->

</div><!-- end .main -->

