<script>
	function selectAll(){
	//$('select_all_link').hide();
	//$('select_all_string').show();
	var checkboxes = document.getElementsByName("users[]");
	for (var i =0; i< checkboxes.length; i++) {
		checkboxes[i].checked = true;
	}
	
}

function selectNone(){
	var checkboxes = document.getElementsByName("users[]");
	for (var i =0; i< checkboxes.length; i++) {
		checkboxes[i].checked = false;
	}
}
function showLoadingUsers(){
	document.getElementById('loading_bar').style.display = 'block';
	//document.removeChild();
	$('user_list_table').remove();
}

function setSubmissionType(type){
	// type = 0 ; // remover
	// type = 1 ; // mudar papel
	
	 var theform = document.getElementById('moderate_users_form');
	 var theattribute = document.getElementById('submission_type');
		
	theattribute.value = type;
	theform.submit();
}

	
</script>

<div id="all_content3">
<div id="col_content">
	<div id="breadcrumbs"><a href="<%=application_url%>">home</a> > <a href="#">administração</a> > <a href="#">usuários</a> </div>
 	<div id="title">MODERAÇÃO DE USUÁRIOS
		<%= render :partial => "admin/taskbar" %>
	</div>
	
	<div id="filter_bar">
		
	    <span id="title_list" class="title_list">MOSTRANDO MAIS ANTIGOS</span>
	    <!--<span class="title_filter">Ordenar:</span>-->
	      
    </div>
    <div id="all_list">
    	
		<% if @users && @users.size > 0 %>
		
		<% form_remote_tag :url => {:action => :search_users}, :loading => "showLoadingUsers()" do %>
		 <%= text_field_tag :search_user %><%= submit_tag 'Buscar' %><BR>
		<% end %>
		
		<% form_tag url_for(:action => :moderate_users), :id => "moderate_users_form" do %>
		 <%= hidden_field_tag :submission_type, :value => '0'%>
		
		Selecionar: <%=link_to_function 'Todos', 'selectAll()'%> | <%=link_to_function 'Nenhum', 'selectNone()'%> | 
		
		 Selecionados:  <%= select_tag(:role_id, options_for_select([['User', 3],['Admin', 1]], 3)) %> <%= button_to_function 'Mudar Papel', 'setSubmissionType(1)'%> | <%= submit_tag "Remover" %>
			
		
		 
			
			<div id="user_list">
			<%= render :partial => 'admin/user_list', :locals => {:users => @users}%>
			
			</div>
			
		 <% end %>
		<% else %>
 			Não há usuários no sistema.
		<% end %>
    	
    </div> <!-- fim da listagem --> 
	
	<div id="pagination" align="center" class="pagination">

		<%= will_paginate  @users, :params => {:sort_by => @sort_by}, :class => "pagination_number"  %>
		
    </div>

</div>
<div id="col_box3">
	
	</div>
</div>
