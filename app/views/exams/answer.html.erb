<script language="JavaScript">
var startTime = 0
var start = 0
var end = 0
var diff = 0
var timerID = 0
var sec = 0
var min = 0
var hr = 0

function chrono(){
	end = new Date()
	diff = end - start
	diff = new Date(diff)
	//var msec = diff.getMilliseconds()
	sec = diff.getSeconds()
	min = diff.getMinutes()
    hr = diff.getHours()-1
	hr = "00";
	if (min < 10){
		min = "0" + min
	}
	if (sec < 10){
		sec = "0" + sec
	}
	
	/*if(msec < 10){
		msec = "00" +msec
	}
	else if(msec < 100){
		msec = "0" +msec
	}*/
	
	//alert('oi');
	//alert(document.getElementById("chronotime"));
	document.getElementById("clock").innerHTML = hr + ":" + min + ":" + sec; //+ ":" + msec
	timerID = setTimeout("chrono()", 10)
}
function chronoStart(){
	//document.chronoForm.startstop.value = "stop!"
	//document.chronoForm.startstop.onclick = chronoStop
	//document.chronoForm.reset.onclick = chronoReset
	start = new Date()
	chrono()
}
function chronoContinue(){
	document.chronoForm.startstop.value = "stop!"
	document.chronoForm.startstop.onclick = chronoStop
	document.chronoForm.reset.onclick = chronoReset
	start = new Date()-diff
	start = new Date(start)
	chrono()
}
function chronoReset(){
	document.getElementById("chronotime").innerHTML = "00:00:000"
	start = new Date()
}
function chronoStopReset(){
	document.getElementById("chronotime").innerHTML = "00:00:000"
	document.chronoForm.startstop.onclick = chronoStart
}
function chronoStop(){
	document.chronoForm.startstop.value = "start!"
	document.chronoForm.startstop.onclick = chronoContinue
	document.chronoForm.reset.onclick = chronoStopReset
	clearTimeout(timerID)
}

function submitChrono(){
	//var theTime = document.getElementById("clock").innerHTML;
	// submit time in secondes
	
	var theTime = sec + min * 60 + hr * 3600;
	//alert(theTime);
	document.getElementById("chrono").value = theTime;
}

function strikeId(id){
	document.getElementById('qIndex'+id).className += ' indexStrike';
}

function selectId(id){
	document.getElementById('qIndex'+id).className += ' indexSel';
}
function deselectId(id){
	var idlink = document.getElementById('qIndex'+id);
	idlink.className = idlink.className.replace(' indexSel', '');
}

function showLoading(){
	$('q_loading').show();
	$('navigation').hide();
}
function hideLoading(){
	$('q_loading').hide();
	$('navigation').show();
}

</script>


<div id="all_content4">
<div id="content_preview_exame">
	<div id="breadcrumbs_video"><a href="#">home</a> > <a href="#">aprender</a> > <a href="#">exames</a>  > <strong><%= session[:exam].name %></strong></div>    
   	<div id="title_exame"><%= session[:exam].name %></div>
	<!-- CABEÃ‡ALHO ############################################################################################################################### -->

	<%= render :partial => 'exams/exam_header', :locals => {:exam => session[:exam]} %>
	
 
	<div id="clock">00:00:00</div>
	<!-- <a href="#" onclick="hideChron()">(esconder)</a> -->
	
	<!-- QUESTOES ##################################################################################################################################################### -->
 <% form_remote_tag(:url => {:action => :answer}, :loading => "showLoading();", :html => {:id => 'form_answer'}) do %>
  <input id="chrono" name="chrono" type="hidden" value="" />
  
<div id ="question_box">  
  
<%= render :partial => "exams/question_answer", :locals => {:question => @step}%>
	
</div>	


 <div id="questions" style="width: auto;">
    	<ul id="questions_number">
            <li><a href="" class="number"><%= image_tag "icon_info.png", :border => "0", :title => "Instruções" %></a><li>
            
			<% session[:exam].questions.each_with_index do |q, x| %>
    		<% if(0 == x) %>
				<li><%= link_to_remote x + 1, :url => {:action => :answer, :id => session[:exam].id, :q_index => x}, :html => {:class => 'number indexSel', :id => 'qIndex'+ q.id.to_s}%></li> 
			<% else %>
  				<li><%= link_to_remote x + 1, :url => {:action => :answer, :id => session[:exam].id, :q_index => x}, :html => {:class => 'number', :id => 'qIndex'+ q.id.to_s}%></li> 
			<% end %>
  			<% end %>
            
    	</ul>
    </div>

<!-- ############################################################################################################################################################### -->    <div id="navegador">
    	
		<div id="navigation">
		<%= button_to_remote('Anterior', {:url => {:action => :answer, :id => session[:exam].id, :q_index => (session[:question_index]-2)}, :loading => "showLoading();"}, :id => 'prev_answer_btn', :disabled => true) %>
		|  <%= submit_tag @has_next ? "Próximo" : "Finalizar", :id => 'submit_answer_btn'  %>
  		</div>
		
		<div id="q_loading" style="display: none;"><em>Carregando questão... </em>
			<%= image_tag 'loadingAnimation.gif' %>
		</div>
		
	<% end %> 
		
    </div> 
</div>
</div>
</div>


<script>
	document.body.onload = chronoStart();
</script>










 