 <script>
 	function saveDraft(opt){
		
        var theform = document.getElementById('exam_form');
		var theattribute = document.getElementById('sbt_opt');
		
		theattribute.value = opt;
		theform.submit();
    }
 </script>
 
 <% form_for :exam, @exam,  :url => { :action => "new_exam" },  :html => {:id => 'exam_form'} do |f| %>

 <%= link_to_function 'Nova questão', 'saveDraft(1)' %> | 
 <%= link_to_function 'Adicionar questão', 'saveDraft(2)' %>
 
 <%= hidden_field_tag('sbt_opt', 0) %>
  <%= f.hidden_field(:id, :value => @exam.id) %>
 
 <BR><hr><BR>
 
 Título: <BR> <%= f.text_field :name %>
 <br/><BR>
 Descrição: <BR><!-- f.text_area :description, :size => "50x3" --->
 <br/><BR>

 <div id="questions" style="min-height: 100px;">
 
 <% if @exam.questions && @exam.questions.length > 0 %>
 <%= render :partial => 'questions/question_show', :collection => @exam.questions, :as => :question %> 
 <% else %>
 Não há questões nesse teste ainda. 
 Clique em "Adicionar Questão" para adicionar uma questão a 
 partir do banco de dados ou "Nova Questão" para criar uma questão.
 
 <% end %>
 </div>
 
 <!-- drop_receiving_element('questions',                             # The id of the receiving element
  :with   => "'question=' + (element.id.split('_').last())",     # The query string parameters
  :url    => {:action=>:trash_comment}                          # The action to call
 )-->
 
 <%= sortable_element 'questions',
:url => { :action => "sort" , :id => @exam },
:complete => visual_effect(:highlight, 'questions'),
 :tag => 'div'
%>

  <%= submit_tag "Salvar Teste" %>
  <%= link_to 'Descartar e Voltar', :action => :discard_draft %>
  
 <% end %>
 


 
 
 
 
 
 
 
 
 