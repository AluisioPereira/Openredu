

	<%= f.label "Nome:" %><br/>
	<%= f.text_field :name %><br/><br/>

	<%= f.label "Descrição:" %><br/>
	<%= f.text_area :description, :size => "50x3" %><br/><br/>
	
	<%= f.label "Tags:" %><br/>
	<%= f.text_field :tag_list %><br/><br/>
	
	<%= f.label "Pública" %><br/>
	<%= f.check_box :published %><br/><br/>
	
	<%= f.label "Postar em:" %><br/>
	<% @schools = current_user.schools %>
	<% @schools.each do | school | %>
		<%= radio_button_tag :post_to, school.id %> <%= school.name %><br/>
	<% end %>
	<br/><br/>
	
	<% @user_resources = current_user.resources %>
	
	
	
<% unless edit %>
<fieldset>
	<legend>Material Principal</legend>

  <%= f.radio_button :external_resource_type, :slideshare, {:onchange => "switchCourseFields(2);"} %>
  <%= f.label :external_resource_type_slideshare, "Slideshare" %>	
  <%= f.radio_button :external_resource_type, :youtube, {:onchange => "switchCourseFields(2);"} %>
  <%= f.label :external_resource_type_youtube, "Youtube" %>
  <%= f.radio_button :external_resource_type, :upload, {:onchange => "switchCourseFields(1);"} %>
  <%= f.label :external_resource_type_upload, "Upload" %><br/><br/>

  <div id="upload_resource_field" style="display:none;">
  <%= f.label :media, "Upload de Material" %><br/>
  <%= f.file_field :media  %><br/><br/>
  (tamanho máximo: 50MB)
  </div>

  <div id="external_resource_field" style="display:none;">
  <%= f.label :external_resource, "Material Externo (Youtube, Slideshare, etc)" %><br/>
  <%= f.text_field :external_resource  %><br/><br/>
  </div>
  
</fieldset>	
<% end %>
<script type="text/javascript">
	function switchCourseFields(fieldType){
		if (fieldType == 1) {
			$('price_box').show();
			document.getElementById("upload_resource_field").style.display = "block";
			document.getElementById("external_resource_field").style.display = "none";
		} else {
			$('price_box').hide();
			document.getElementById("upload_resource_field").style.display = "none";
			document.getElementById("external_resource_field").style.display = "block";
		}
		
	}
	
	function removeField(link){
		jQuery(link).parent("fieldset:first").hide()
		jQuery(link).siblings("input[type=hidden]:first").val("1")
	}
	
	function add_fields(link, association, content) {
		var new_id = new Date().getTime();
		var regexp = new RegExp("new_" + association, "g")
		jQuery(link).before("<fieldset>" + content.replace(regexp, new_id) + "</fieldset>");
	}

</script>
<fieldset>
	<legend>Material Complementar</legend>
	<% f.fields_for :resources do | build |%>
		<fieldset>
		<%= render :partial => 'resource_fields', :locals => {:f => build} %>
		</fieldset>
	<% end %>
	<%= link_to_add_fields "Adicionar material", f, :resources %>
</fieldset>	

<fieldset id="price_box">
	<legend>Preços</legend>
	<% f.fields_for :price do | course_price | %>
		<%= course_price.label :price %>
		<%= course_price.text_field :price %>
		<%= course_price.hidden_field :key_number %>
	<% end %>
</fieldset>

