<% content_for :js do %>
<script type="text/javascript">
function selectCategory(category) {
	//alert(request);
	jQuery('#cat_'+ category).parent().children().removeClass('selected')
	jQuery('#cat_'+ category).addClass('selected')
	loadList();

}

function selectType(theType) {
		jQuery('#type_'+ theType).parent().children().removeClass('selected')
	jQuery('#type_'+ theType).addClass('selected')
	loadList();
}

function loadList(){
	jQuery('#course_list').html(' ')
	jQuery('#loader').show()
}

function getParameters(){
	
	var params = ''
	jQuery('.selected').each(function(i) {
		var name = $(this).attr('id').split('_')
		name[0]
		params += ''
	})
	
	return params;
}
</script>
<% end %>


<div class="grid_16">
	<!--
<div id="breadcrumbs">
		<% if @school %>
	<a href="<%=application_url%>">início</a> > <a href="#">redes</a> > <%= link_to @school.name, @school %> > aulas
	<% else %>
	<a href="<%=application_url%>">início</a> > <a href="#">aprender</a> > aulas
	<%end %>
</div>
-->

<h3> Aulas</h3>
</div>

<%= render(:partial => "schools/school_info", :locals=>{:show => false}) if @school%>


<div class="grid_4 calls" id="filter">
	<!--
	<span class="call"><span>Refinar</span></span>
	-->
	<form>
	<% field_set_tag "Área" do %>
	<ul class="criteriaList">
		<li id ="cat_all" class="selected">
			<%= link_to_remote "Todas", :url => {:action => :index}, :loading => "selectCategory('all')", :method => :get%>
		</li>
		
		<% for category in SimpleCategory.all do %>
		<li id = "cat_<%=category.id%>">
			<%= link_to_remote category_i18n(category.name), :url => {:action => :index, :category => category.id}, :loading => "selectCategory('"+category.id.to_s+"')", :with => "getParameters()",:method => :get%>
		</li>
		<% end %>
		
	</ul>
	<% end %>
	</form>
	
	
	<form>
	<% field_set_tag "Tipo de Aula" do %>
	<ul class="criteriaList">
		
		<li id ="type_all" class="selected">
			<%= link_to_remote "Todas", :url => {:action => :index}, :loading => "selectType('all')", :method => :get%>
		</li>
	
		
		<li id = "type_seminar">
			<%= link_to_remote "Vídeo-aula", :url => {:action => :index, :type => 'Seminar'}, :loading => "selectType('seminar')", :method => :get%>
		</li>
		
		<li id = "type_interactive_class">
			<%= link_to_remote "Aula passo-a-passo", :url => {:action => :index, :type => 'InteractiveClass'}, :loading => "selectType('interactive_class')", :method => :get%>
		</li>
		
		<li id = "type_page">
			<%= link_to_remote "Página", :url => {:action => :index, :type => 'Page'}, :loading => "selectType('page')", :method => :get%>
		</li>
		
		
		
	</ul>
	<% end %>
	</form>
	
	
		<form>
	<% field_set_tag "Ordem" do %>
	<ul class="criteriaList">
		<li class="selected">
			<%= link_to "Mais recentes", "#"%>
		</li>
		
		<li>
			<%= link_to "Mais vistas", "#"%>
		</li>
		<li>
			<%= link_to "Melhores avaliadas", "#"%>
		</li>
		
	</ul>
	<% end %>
	</form>
	
	
	
</div>


<span class="grid_12 filter_bar">
	<span class="filter_text">
		<%= (params[:search]) ? ("Resultados para: \""+params[:search]+"\"") : "Todas as aulas mais recentes" %>
	</span>
	
	<% form_tag courses_path, :method => :get do %>
	Buscar 
	<%= text_field_tag :search, params[:search] %>
	<%= submit_tag "OK", :name => nil%>
	<% end %>
	

</span>

<%= image_tag "loadingAnimation.gif", :id => "loader", :style => "display: none"%>
<div id="course_list" class="grid_12">
	
	<%= render :partial => "course_list"%>
</div>



