<script>
	
	

String.prototype.NormaliseUrl = function () {
    var url = this;
    var preserveNormalForm = /[,_`;\':-]+/gi
    url = url.replace(preserveNormalForm, ' ');

    // strip accents
    url = stripVowelAccent(url);

    //remove all special chars
    url = url.replace(/[^a-z|^0-9|^-|\s]/gi, '').trim();

    //replace spaces with a -
    url = url.replace(/\s+/gi, '-');
    return url.toLowerCase();
}

String.prototype.trim = function () {
    return this.replace(/^\s+|\s+$/g, "");
}

function stripVowelAccent(str) {
    var rExps = [{ re: /[\xC0-\xC6]/g, ch: 'A' },
                 { re: /[\xE0-\xE6]/g, ch: 'a' },
                 { re: /[\xC8-\xCB]/g, ch: 'E' },
                 { re: /[\xE8-\xEB]/g, ch: 'e' },
                 { re: /[\xCC-\xCF]/g, ch: 'I' },
                 { re: /[\xEC-\xEF]/g, ch: 'i' },
                 { re: /[\xD2-\xD6]/g, ch: 'O' },
                 { re: /[\xF2-\xF6]/g, ch: 'o' },
                 { re: /[\xD9-\xDC]/g, ch: 'U' },
                 { re: /[\xF9-\xFC]/g, ch: 'u' },
				 { re: /[\xE7]/g, ch: 'c' },
				 { re: /[\xC7]/g, ch: 'C' },
                 { re: /[\xD1]/g, ch: 'N' },
                 { re: /[\xF1]/g, ch: 'n'}];
				 


    for (var i = 0, len = rExps.length; i < len; i++)
        str = str.replace(rExps[i].re, rExps[i].ch);

    return str;
}


	
	
	
	
	function generatePath(nameField){
		document.getElementById("school_path").value = (nameField.value).NormaliseUrl();
		
		//document.getElementById("school_path").value = (nameField.value).replace(/[^a-zA-Z0-9_]+/g, '');
	}


</script>

	<%= f.label "Nome" %>:<br/>
	<%= f.text_field :name , :onkeyup => "generatePath(this)" %><br/><br/>
	
	<%= f.label "Caminho" %>:<br/>
	www.redu.com.br/<%= f.text_field :path %><br/><br/>

	<%= f.label "Descrição" %>:<br/>
	<%= f.text_area :description, :size => "50x3" %><br/><br/>
	
	<%= f.label "Imagem" %>:<br/>
	<%= f.file_field :avatar %><br/><br/>
	
	<%= f.label "Tags (separadas por vírgula)" %>:<br/>
	<%= f.text_field :tag_list %><br/><br/>
	
	<% if AppConfig.activate_payment %>
	<%= f.label "Preço da assinatura" %>:<br/>
	<%= f.text_field :key_price %><br/><br/>
	<% end %>
	
	<fieldset><legend>Configurações</legend>
	
	<%= f.label "Quem pode entrar na rede?" %><br/>
	<%= f.radio_button :subscription_type, "1", :checked => true %> Todos<br/>
	<%= f.radio_button :subscription_type, "2" %> Moderação<br/><br/><br/>
	
	<%= f.label "Quem pode postar na rede?" %><br/>
	<%= f.radio_button :submission_type, "1", :checked => true %> Todos - sem moderação<br/>
	<%= f.radio_button :submission_type, "2" %> Todos - com moderação<br/>
	<%= f.radio_button :submission_type, "3" %> Apenas professores e administradores<br/><br/><br/>
	
	<%= f.label "Perfil da rede" %><br/>
	<%= f.radio_button :public_profile, true, :checked => true %> Público<br/>
	<%= f.radio_button :public_profile, false %> Privado (apenas nome e descrição serão mostrados)<br/><br/><br/>
	</fieldset>
