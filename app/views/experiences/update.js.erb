<% if @experience.valid? %>
  <%# Remove o item da lista e o re-adiciona atualizado. %>
  $("#experience-<%= @experience.id %>").remove();
  var $newItem = $("<%= escape_javascript render :partial => 'experiences/item',
      :locals => { :item => @experience } %>");
  $("#curriculum .experiences").prepend($newItem);

  <%# Esconde o formulário de edição. %>
  $newItem.find(".edit-form").hide();

<% else %>
  <%# Substitui o formulário de criação com os erros de validação. %>
  var experienceForm = "<%= escape_javascript render :partial => 'experiences/form',
    :locals => { :user => @experience.user, :experience => @experience } %>";
  var $form = $("#edit_experience_<%= @experience.id %>");

  $form
    .replaceWith(experienceForm)
    .show();
<% end %>