(function(b){var a;b.rails=a={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required],textarea[name][required]",fileInputSelector:"input:file",CSRFProtection:function(d){var c=b('meta[name="csrf-token"]').attr("content");if(c){d.setRequestHeader("X-CSRF-Token",c)}},fire:function(g,c,f){var d=b.Event(c);g.trigger(d,f);return d.result!==false},confirm:function(c){return confirm(c)},ajax:function(c){return b.ajax(c)},handleRemote:function(g){var i,d,h,c=g.data("type")||(b.ajaxSettings&&b.ajaxSettings.dataType);if(a.fire(g,"ajax:before")){if(g.is("form")){i=g.attr("method");d=g.attr("action");h=g.serializeArray();var f=g.data("ujs:submit-button");if(f){h.push(f);g.data("ujs:submit-button",null)}}else{i=g.data("method");d=g.attr("href");h=null}a.ajax({url:d,type:i||"GET",data:h,dataType:c,beforeSend:function(k,j){if(j.dataType===undefined){k.setRequestHeader("accept","*/*;q=0.5, "+j.accepts.script)}return a.fire(g,"ajax:beforeSend",[k,j])},success:function(k,j,l){g.trigger("ajax:success",[k,j,l])},complete:function(k,j){g.trigger("ajax:complete",[k,j])},error:function(l,j,k){g.trigger("ajax:error",[l,j,k])}})}},handleMethod:function(h){var d=h.attr("href"),j=h.data("method"),f=b("meta[name=csrf-token]").attr("content"),i=b("meta[name=csrf-param]").attr("content"),g=b('<form method="post" action="'+d+'"></form>'),c='<input name="_method" value="'+j+'" type="hidden" />';if(i!==undefined&&f!==undefined){c+='<input name="'+i+'" value="'+f+'" type="hidden" />'}g.hide().append(c).appendTo("body");g.submit()},disableFormElements:function(c){c.find(a.disableSelector).each(function(){var d=b(this),f=d.is("button")?"html":"val";d.data("ujs:enable-with",d[f]());d[f](d.data("disable-with"));d.attr("disabled","disabled")})},enableFormElements:function(c){c.find(a.enableSelector).each(function(){var d=b(this),f=d.is("button")?"html":"val";if(d.data("ujs:enable-with")){d[f](d.data("ujs:enable-with"))}d.removeAttr("disabled")})},allowAction:function(c){var d=c.data("confirm"),f=false,g;if(!d){return true}if(a.fire(c,"confirm")){f=a.confirm(d);g=a.fire(c,"confirm:complete",[f])}return f&&g},blankInputs:function(i,f,h){var d=b(),g,c=f||"input,textarea";i.find(c).each(function(){g=b(this);if(h?g.val():!g.val()){d=d.add(g)}});return d.length?d:false},nonBlankInputs:function(d,c){return a.blankInputs(d,c,true)},stopEverything:function(c){c.stopImmediatePropagation();return false},callFormSubmitBindings:function(d){var c=d.data("events"),f=true;if(c!==undefined&&c.submit!==undefined){b.each(c.submit,function(g,h){if(typeof h.handler==="function"){return f=h.handler(h.data)}})}return f}};if("ajaxPrefilter" in b){b.ajaxPrefilter(function(c,f,d){a.CSRFProtection(d)})}else{b(document).ajaxSend(function(c,d){a.CSRFProtection(d)})}b(a.linkClickSelector).live("click.rails",function(d){var c=b(this);if(!a.allowAction(c)){return a.stopEverything(d)}if(c.data("remote")!==undefined){a.handleRemote(c);return false}else{if(c.data("method")){a.handleMethod(c);return false}}});b(a.formSubmitSelector).live("submit.rails",function(h){var f=b(this),g=f.data("remote")!==undefined,d=a.blankInputs(f,a.requiredInputSelector),c=a.nonBlankInputs(f,a.fileInputSelector);if(!a.allowAction(f)){return a.stopEverything(h)}if(d&&a.fire(f,"ajax:aborted:required",[d])){return !g}if(g){if(c){return a.fire(f,"ajax:aborted:file",[c])}if(!b.support.submitBubbles&&a.callFormSubmitBindings(f)===false){return a.stopEverything(h)}a.handleRemote(f);return false}else{setTimeout(function(){a.disableFormElements(f)},13)}});b(a.formInputClickSelector).live("click.rails",function(f){var d=b(this);if(!a.allowAction(d)){return a.stopEverything(f)}var c=d.attr("name"),g=c?{name:c,value:d.val()}:null;d.closest("form").data("ujs:submit-button",g)});b(a.formSubmitSelector).live("ajax:beforeSend.rails",function(c){if(this==c.target){a.disableFormElements(b(this))}});b(a.formSubmitSelector).live("ajax:complete.rails",function(c){if(this==c.target){a.enableFormElements(b(this))}})})(jQuery);jQuery(function(){$(".flash-message").parent().next().css("marginTop","10px");$(".flash-message .close-flash").click(function(a){$(this).parent().slideToggle();$("#content").css("marginTop","20px");$("#home").css("marginTop","40px");a.preventDefault()});$("#nav-account").hover(function(){$(this).find(".username").toggleClass("hover");$(this).find("ul").toggle()});$("a.reply-status, .cancel",".statuses").live("click",function(a){$(this).parents("ul:first").next(".create-response").slideToggle();$(this).parents(".create-response:first").slideToggle();a.preventDefault()});$(".responses",".statuses").each(function(a,b){$(this).find("> ol > li:gt(2)").hide();$(this).find(".toggle-statuses .qty").html($(this).find("ol > li").length)});$(".toggle-statuses",".statuses").live("click",function(a){$(this).prev().find("> li:hidden").slideDown();a.preventDefault()});$("input[type=submit], .cancel, .char-limit",".inform-my-status").hide();$(".inform-my-status textarea").live("focus",function(a){$(this).parents("form").find("input[type=submit], .cancel, .char-limit").fadeIn()});$(".inform-my-status textarea").live("blur",function(a){$(this).parents("form").find("input[type=submit], .cancel, .char-limit").fadeOut()});$("input[type=text], input[type=password], input[type=radio], input[type=checkbox]","form.highlightable").focus(function(){var a=$(this).attr("id")||null;if(a){$("label[for="+a+"]").addClass("focus")}}).blur(function(){var a=$(this).attr("id")||null;if(a){$("label[for="+a+"]").removeClass("focus")}});jQuery.fn.slug=function(){var c=$(this);var a=stripAccent(c.val());var b=a.replace(/\s+/g,"-");return b.replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()};$(".new-resource li").live("hover",function(){var a="<strong>"+$(this).html()+"</strong>";a+=$(this).find("a").attr("title");$(".new-resource .explanation").html(a);$(".new-resource .explanation").find("a").removeClass("link-loading")});$("#new_subject .new-resource li a").live("click",function(){$("#new_subject .new-resource li").removeClass("selected");$(this).parents("li:first").addClass("selected")});$(".expand, .unexpand","#space-subjects .subjects").click(function(){$(this).toggleClass("expand");$(this).toggleClass("unexpand");$(this).parents("li:first").toggleClass("open");$(this).next().slideToggle("fast")});$("#resource .student-actions .action-help").click(function(a){$(this).parents("li:first").toggleClass("selected");$(".statuses-wrapper","#resource").slideToggle();a.preventDefault()});$("#seminar_external_resource").live("change",function(){youtubePreview($("#seminar_external_resource"))});$("table.common tr:even:not(.invite):not(.message)").addClass("odd");$("#select_all").change(function(b){var a=$(this);if(a.is(":checked")){$("input[type=checkbox].autoCheck").attr("checked",true)}else{$("input[type=checkbox].autoCheck").attr("checked",false)}return true});$("#global-courses .filters .filter").each(function(){var a=$(this).find("input");if(a.is(":checked")){$(this).addClass("checked")}});$("#global-courses .filters .filter").click(function(){var a=$(this).find("input[type=checkbox]");if(a.is(":checked")){$(this).removeClass("checked");a.attr("checked","")}else{$(this).addClass("checked");a.attr("checked","checked")}});$("#global-courses .courses .expand").live("click",function(){$(this).toggleClass("unexpand");$(this).parents(":first").next().slideToggle()});$(".parent-height").height(function(b,a){$(this).height($(this).parent().height())});$("#user_email").click(function(){$("#user_email_confirmation").slideDown();$("#user_email_confirmation").prev().slideDown()});$("#user_email_confirmation").blur(function(){email_val=$("#user_email").val();confirmation_val=$(this).val();if(email_val!=confirmation_val){$("#user_email_confirmation-error").remove();$(this).after('<p id="user_email_confirmation-error" class="errorMessageField">Os e-mails digitados não são iguais.</p>')}else{$("#user_email_confirmation-error").remove()}});$(".tiptip").tipTip();$(".form-common").ajaxComplete(function(){$(".tiptip").tipTip()});$(".form-common .tiptip").each(function(){var a=$(this).next("label");a.prepend($(this))});$(".tiptip-lite").each(function(){var a=$("<span class='tiptip question-blue_12_12'/>");a.attr("title",$(this).attr("title"));a.tipTip();$(this).after(a);a.position({my:"left center",at:"right center",of:$(this),offset:"10px 0",})});$("#space-materials .new-folder .button").click(function(a){$(this).next(".new-folder-inner").toggle();a.preventDefault()});$(".form-common, .form-loader").live("ajax:before",function(){$(this).find("input[type=submit]").loadingStart()});$(".form-common, .form-loader").live("ajax:complete",function(){$(this).find("input[type=submit]").loadingComplete()});$("a[data-remote=true]").live("ajax:before",function(){$(this).addClass("link-loading")});$("a[data-remote=true]").live("ajax:complete",function(){$(this).removeClass("link-loading")});$.fn.loadingStart=function(){return this.each(function(){$bt=$(this);$bt.addClass("bt-loading")})};$.fn.loadingComplete=function(){return this.each(function(){$bt=$(this);$bt.removeClass("bt-loading")})};$.fn.loadingToggle=function(){return this.each(function(){$bt=$(this);if($bt.hasClass("bt-loading")){$bt.loadingComplete()}else{$bt.loadingStart()}})}});function limitChars(c,a,b){var f=$("."+c).val();var d=f.length;if(d>a){$("."+c).val(f.substr(0,a));return false}else{$("."+b).html(a-d);return true}}function stripAccent(d){var c=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xE7]/g,ch:"c"},{re:/[\xC7]/g,ch:"C"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];for(var b=0,a=c.length;b<a;b++){d=d.replace(c[b].re,c[b].ch)}return d}function youtubePreview(a){regex=/youtube\.com\/watch\?v=([A-Za-z0-9._%-]*)[&\w;=\+_\-]*/;id=a.val().match(regex);if(id!=null){youtube_id=id[1];url="http://www.youtube.com/v/"+youtube_id+"&hl=en&fs=1";jQuery("#yt_preview_param").attr("value",url);jQuery("embed").attr("src",url);jQuery("#youtube_preview").show()}else{$("#youtube_preview").hide()}}function switchCourseFields(a){if(a==1){$("#upload_resource_field").show();$("#external_resource_field").hide();$("#youtube_preview").hide();$("#seminar_submit").hide()}else{$("#upload_resource_field").hide();$("#external_resource_field").show();youtubePreview($("#seminar_external_resource"));$("#seminar_submit").show()}}(function(a){a.fn.tipTip=function(c){var h={activation:"hover",keepAlive:false,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:false,enter:function(){},exit:function(){}};var f=a.extend(h,c);if(a("#tiptip_holder").length<=0){var b=a('<div id="tiptip_holder" style="max-width:'+f.maxWidth+';"></div>');var d=a('<div id="tiptip_content"></div>');var g=a('<div id="tiptip_arrow"></div>');a("body").append(b.html(d).prepend(g.html('<div id="tiptip_arrow_inner"></div>')))}else{var b=a("#tiptip_holder");var d=a("#tiptip_content");var g=a("#tiptip_arrow")}return this.each(function(){var j=a(this);if(f.content){var m=f.content}else{var m=j.attr(f.attribute)}if(m!=""){if(!f.content){j.removeAttr(f.attribute)}var i=false;if(f.activation=="hover"){j.hover(function(){l()},function(){if(!f.keepAlive){k()}});if(f.keepAlive){b.hover(function(){},function(){k()})}}else{if(f.activation=="focus"){j.focus(function(){l()}).blur(function(){k()})}else{if(f.activation=="click"){j.click(function(){l();return false}).hover(function(){},function(){if(!f.keepAlive){k()}});if(f.keepAlive){b.hover(function(){},function(){k()})}}}}function l(){f.enter.call(this);d.html(m);b.hide().removeAttr("class").css("margin","0");g.removeAttr("style");var z=parseInt(j.offset()["top"]);var q=parseInt(j.offset()["left"]);var w=parseInt(j.outerWidth());var B=parseInt(j.outerHeight());var y=b.outerWidth();var t=b.outerHeight();var x=Math.round((w-y)/2);var p=Math.round((B-t)/2);var o=Math.round(q+x);var n=Math.round(z+B+f.edgeOffset);var u="";var D="";var v=Math.round(y-12)/2;if(f.defaultPosition=="bottom"){u="_bottom"}else{if(f.defaultPosition=="top"){u="_top"}else{if(f.defaultPosition=="left"){u="_left"}else{if(f.defaultPosition=="right"){u="_right"}}}}var s=(x+q)<parseInt(a(window).scrollLeft());var r=(y+q)>parseInt(a(window).width());if((s&&x<0)||(u=="_right"&&!r)||(u=="_left"&&q<(y+f.edgeOffset+5))){u="_right";D=Math.round(t-13)/2;v=-12;o=Math.round(q+w+f.edgeOffset);n=Math.round(z+p)}else{if((r&&x<0)||(u=="_left"&&!s)){u="_left";D=Math.round(t-13)/2;v=Math.round(y);o=Math.round(q-(y+f.edgeOffset+5));n=Math.round(z+p)}}var A=(z+B+f.edgeOffset+t+8)>parseInt(a(window).height()+a(window).scrollTop());var C=((z+B)-(f.edgeOffset+t+8))<0;if(A||(u=="_bottom"&&A)||(u=="_top"&&!C)){if(u=="_top"||u=="_bottom"){u="_top"}else{u=u+"_top"}D=t;n=Math.round(z-(t+5+f.edgeOffset))}else{if(C|(u=="_top"&&C)||(u=="_bottom"&&!A)){if(u=="_top"||u=="_bottom"){u="_bottom"}else{u=u+"_bottom"}D=-12;n=Math.round(z+B+f.edgeOffset)}}if(u=="_right_top"||u=="_left_top"){n=n+5}else{if(u=="_right_bottom"||u=="_left_bottom"){n=n-5}}if(u=="_left_top"||u=="_left_bottom"){o=o+5}g.css({"margin-left":v+"px","margin-top":D+"px"});b.css({"margin-left":o+"px","margin-top":n+"px"}).attr("class","tip"+u);if(i){clearTimeout(i)}i=setTimeout(function(){b.stop(true,true).fadeIn(f.fadeIn)},f.delay)}function k(){f.exit.call(this);if(i){clearTimeout(i)}b.fadeOut(f.fadeOut)}}})}})(jQuery);$(function(){var a={};a.fileInputs=function(){var g=$(this),b=g.val(),f=b.split("\\"),c=f[f.length-1],d=g.siblings(".button"),h=g.siblings(".file-holder");if(c!==""){d.text("Escolhido");h.remove();d.after('<span class="file-holder">'+c+"</span>")}};a.toggleFields=function(c){var b=$(c).parents("tr:first");b.find(".folder-name, .rename-folder").toggle()};a.toggleSpinner=function(b){$(b).next(".spinner:first").toggle()};a.toggleLoader=function(){$("#file_list table").toggle();$("#loading-files").toggle()};a.setup=function(){var b=$(this);b.val("");a.refresh()};a.refresh=function(){$(document).ajaxComplete(function(){$("table.common tr:even").addClass("odd")})};a.setup();$(".new-folder .button").live("click",function(b){$(".new-file-inner:visible","#folder-admin").slideUp("fast");$(this).next(".holder").slideToggle("fast");b.preventDefault()});$(".new-file .button").live("click",function(b){$(".new-folder-inner:visible","#folder-admin").slideUp("fast");$(this).next(".holder").slideToggle("fast");b.preventDefault()});$("#folder-admin .new-file .file-wrapper input[type=file]").live("change focus click",a.fileInputs);$(".rename, .rename-folder .cancel").live("click",function(b){a.toggleFields(this);b.preventDefault()});$(".delete").live("click",function(b){a.toggleSpinner(this);b.preventDefault()})});$(function(){$overlay=$("<div/>",{id:"lights_dimmed","class":"clearfix"}).hide();$("body").prepend($overlay);$("#lights").toggle(function(b){var a=$(document).height();$(".student-actions").css("position","relative");$(".stage").css("position","relative");$(".statuses-wrapper").css("position","relative").css("backgroundColor","white");$("#lights_dimmed").css("height",a).fadeIn();$(this).html("Acender luzes");b.preventDefault()},function(){$("#lights_dimmed").fadeOut();$(this).html("Apagar luzes")});$(".statuses-wrapper").live("click",function(){var a=$(document).height();$("#lights_dimmed:visible").css("height",a)});$("#do_lecture").live("ajax:before ajax:complete",function(){$(this).find("label[for='Aula_finalizada']").loadingToggle()})});var params={allowfullscreen:"true",allowscriptaccess:"always",bgcolor:"#ffffff"};var attributes={id:"player",name:"player"};var swfobject=function(){var b="undefined",Q="object",n="Shockwave Flash",p="ShockwaveFlash.ShockwaveFlash",P="application/x-shockwave-flash",m="SWFObjectExprInst",j=window,K=document,T=navigator,o=[],N=[],i=[],d=[],J,Z=null,M=null,l=null,e=false,A=false;var h=function(){var v=typeof K.getElementById!=b&&typeof K.getElementsByTagName!=b&&typeof K.createElement!=b,AC=[0,0,0],x=null;if(typeof T.plugins!=b&&typeof T.plugins[n]==Q){x=T.plugins[n].description;if(x&&!(typeof T.mimeTypes!=b&&T.mimeTypes[P]&&!T.mimeTypes[P].enabledPlugin)){x=x.replace(/^.*\s+(\S+\s+\S+$)/,"$1");AC[0]=parseInt(x.replace(/^(.*)\..*$/,"$1"),10);AC[1]=parseInt(x.replace(/^.*\.(.*)\s.*$/,"$1"),10);AC[2]=/r/.test(x)?parseInt(x.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof j.ActiveXObject!=b){var y=null,AB=false;try{y=new ActiveXObject(p+".7")}catch(t){try{y=new ActiveXObject(p+".6");AC=[6,0,21];y.AllowScriptAccess="always"}catch(t){if(AC[0]==6){AB=true}}if(!AB){try{y=new ActiveXObject(p)}catch(t){}}}if(!AB&&y){try{x=y.GetVariable("$version");if(x){x=x.split(" ")[1].split(",");AC=[parseInt(x[0],10),parseInt(x[1],10),parseInt(x[2],10)]}}catch(t){}}}}var AD=T.userAgent.toLowerCase(),r=T.platform.toLowerCase(),AA=/webkit/.test(AD)?parseFloat(AD.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,q=false,z=r?/win/.test(r):/win/.test(AD),w=r?/mac/.test(r):/mac/.test(AD);
/*@cc_on q=true;@if(@_win32)z=true;@elif(@_mac)w=true;@end@*/
return{w3cdom:v,pv:AC,webkit:AA,ie:q,win:z,mac:w}}();var L=function(){if(!h.w3cdom){return}f(H);if(h.ie&&h.win){try{K.write("<script id=__ie_ondomload defer=true src=//:><\/script>");J=C("__ie_ondomload");if(J){I(J,"onreadystatechange",S)}}catch(q){}}if(h.webkit&&typeof K.readyState!=b){Z=setInterval(function(){if(/loaded|complete/.test(K.readyState)){E()}},10)}if(typeof K.addEventListener!=b){K.addEventListener("DOMContentLoaded",E,null)}R(E)}();function S(){if(J.readyState=="complete"){J.parentNode.removeChild(J);E()}}function E(){if(e){return}if(h.ie&&h.win){var v=a("span");try{var u=K.getElementsByTagName("body")[0].appendChild(v);u.parentNode.removeChild(u)}catch(w){return}}e=true;if(Z){clearInterval(Z);Z=null}var q=o.length;for(var r=0;r<q;r++){o[r]()}}function f(q){if(e){q()}else{o[o.length]=q}}function R(r){if(typeof j.addEventListener!=b){j.addEventListener("load",r,false)}else{if(typeof K.addEventListener!=b){K.addEventListener("load",r,false)}else{if(typeof j.attachEvent!=b){I(j,"onload",r)}else{if(typeof j.onload=="function"){var q=j.onload;j.onload=function(){q();r()}}else{j.onload=r}}}}}function H(){var t=N.length;for(var q=0;q<t;q++){var u=N[q].id;if(h.pv[0]>0){var r=C(u);if(r){N[q].width=r.getAttribute("width")?r.getAttribute("width"):"0";N[q].height=r.getAttribute("height")?r.getAttribute("height"):"0";if(c(N[q].swfVersion)){if(h.webkit&&h.webkit<312){Y(r)}W(u,true)}else{if(N[q].expressInstall&&!A&&c("6.0.65")&&(h.win||h.mac)){k(N[q])}else{O(r)}}}}else{W(u,true)}}}function Y(t){var q=t.getElementsByTagName(Q)[0];if(q){var w=a("embed"),y=q.attributes;if(y){var v=y.length;for(var u=0;u<v;u++){if(y[u].nodeName=="DATA"){w.setAttribute("src",y[u].nodeValue)}else{w.setAttribute(y[u].nodeName,y[u].nodeValue)}}}var x=q.childNodes;if(x){var z=x.length;for(var r=0;r<z;r++){if(x[r].nodeType==1&&x[r].nodeName=="PARAM"){w.setAttribute(x[r].getAttribute("name"),x[r].getAttribute("value"))}}}t.parentNode.replaceChild(w,t)}}function k(w){A=true;var u=C(w.id);if(u){if(w.altContentId){var y=C(w.altContentId);if(y){M=y;l=w.altContentId}}else{M=G(u)}if(!(/%$/.test(w.width))&&parseInt(w.width,10)<310){w.width="310"}if(!(/%$/.test(w.height))&&parseInt(w.height,10)<137){w.height="137"}K.title=K.title.slice(0,47)+" - Flash Player Installation";var z=h.ie&&h.win?"ActiveX":"PlugIn",q=K.title,r="MMredirectURL="+j.location+"&MMplayerType="+z+"&MMdoctitle="+q,x=w.id;if(h.ie&&h.win&&u.readyState!=4){var t=a("div");x+="SWFObjectNew";t.setAttribute("id",x);u.parentNode.insertBefore(t,u);u.style.display="none";var v=function(){u.parentNode.removeChild(u)};I(j,"onload",v)}U({data:w.expressInstall,id:m,width:w.width,height:w.height},{flashvars:r},x)}}function O(t){if(h.ie&&h.win&&t.readyState!=4){var r=a("div");t.parentNode.insertBefore(r,t);r.parentNode.replaceChild(G(t),r);t.style.display="none";var q=function(){t.parentNode.removeChild(t)};I(j,"onload",q)}else{t.parentNode.replaceChild(G(t),t)}}function G(v){var u=a("div");if(h.win&&h.ie){u.innerHTML=v.innerHTML}else{var r=v.getElementsByTagName(Q)[0];if(r){var w=r.childNodes;if(w){var q=w.length;for(var t=0;t<q;t++){if(!(w[t].nodeType==1&&w[t].nodeName=="PARAM")&&!(w[t].nodeType==8)){u.appendChild(w[t].cloneNode(true))}}}}}return u}function U(AG,AE,t){var q,v=C(t);if(v){if(typeof AG.id==b){AG.id=t}if(h.ie&&h.win){var AF="";for(var AB in AG){if(AG[AB]!=Object.prototype[AB]){if(AB.toLowerCase()=="data"){AE.movie=AG[AB]}else{if(AB.toLowerCase()=="styleclass"){AF+=' class="'+AG[AB]+'"'}else{if(AB.toLowerCase()!="classid"){AF+=" "+AB+'="'+AG[AB]+'"'}}}}}var AD="";for(var AA in AE){if(AE[AA]!=Object.prototype[AA]){AD+='<param name="'+AA+'" value="'+AE[AA]+'" />'}}v.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+AF+">"+AD+"</object>";i[i.length]=AG.id;q=C(AG.id)}else{if(h.webkit&&h.webkit<312){var AC=a("embed");AC.setAttribute("type",P);for(var z in AG){if(AG[z]!=Object.prototype[z]){if(z.toLowerCase()=="data"){AC.setAttribute("src",AG[z])}else{if(z.toLowerCase()=="styleclass"){AC.setAttribute("class",AG[z])}else{if(z.toLowerCase()!="classid"){AC.setAttribute(z,AG[z])}}}}}for(var y in AE){if(AE[y]!=Object.prototype[y]){if(y.toLowerCase()!="movie"){AC.setAttribute(y,AE[y])}}}v.parentNode.replaceChild(AC,v);q=AC}else{var u=a(Q);u.setAttribute("type",P);for(var x in AG){if(AG[x]!=Object.prototype[x]){if(x.toLowerCase()=="styleclass"){u.setAttribute("class",AG[x])}else{if(x.toLowerCase()!="classid"){u.setAttribute(x,AG[x])}}}}for(var w in AE){if(AE[w]!=Object.prototype[w]&&w.toLowerCase()!="movie"){F(u,w,AE[w])}}v.parentNode.replaceChild(u,v);q=u}}}return q}function F(t,q,r){var u=a("param");u.setAttribute("name",q);u.setAttribute("value",r);t.appendChild(u)}function X(r){var q=C(r);if(q&&(q.nodeName=="OBJECT"||q.nodeName=="EMBED")){if(h.ie&&h.win){if(q.readyState==4){B(r)}else{j.attachEvent("onload",function(){B(r)})}}else{q.parentNode.removeChild(q)}}}function B(t){var r=C(t);if(r){for(var q in r){if(typeof r[q]=="function"){r[q]=null}}r.parentNode.removeChild(r)}}function C(t){var q=null;try{q=K.getElementById(t)}catch(r){}return q}function a(q){return K.createElement(q)}function I(t,q,r){t.attachEvent(q,r);d[d.length]=[t,q,r]}function c(t){var r=h.pv,q=t.split(".");q[0]=parseInt(q[0],10);q[1]=parseInt(q[1],10)||0;q[2]=parseInt(q[2],10)||0;return(r[0]>q[0]||(r[0]==q[0]&&r[1]>q[1])||(r[0]==q[0]&&r[1]==q[1]&&r[2]>=q[2]))?true:false}function V(v,r){if(h.ie&&h.mac){return}var u=K.getElementsByTagName("head")[0],t=a("style");t.setAttribute("type","text/css");t.setAttribute("media","screen");if(!(h.ie&&h.win)&&typeof K.createTextNode!=b){t.appendChild(K.createTextNode(v+" {"+r+"}"))}u.appendChild(t);if(h.ie&&h.win&&typeof K.styleSheets!=b&&K.styleSheets.length>0){var q=K.styleSheets[K.styleSheets.length-1];if(typeof q.addRule==Q){q.addRule(v,r)}}}function W(t,q){var r=q?"visible":"hidden";if(e&&C(t)){C(t).style.visibility=r}else{V("#"+t,"visibility:"+r)}}function g(s){var r=/[\\\"<>\.;]/;var q=r.exec(s)!=null;return q?encodeURIComponent(s):s}var D=function(){if(h.ie&&h.win){window.attachEvent("onunload",function(){var w=d.length;for(var v=0;v<w;v++){d[v][0].detachEvent(d[v][1],d[v][2])}var t=i.length;for(var u=0;u<t;u++){X(i[u])}for(var r in h){h[r]=null}h=null;for(var q in swfobject){swfobject[q]=null}swfobject=null})}}();return{registerObject:function(u,q,t){if(!h.w3cdom||!u||!q){return}var r={};r.id=u;r.swfVersion=q;r.expressInstall=t?t:false;N[N.length]=r;W(u,false)},getObjectById:function(v){var q=null;if(h.w3cdom){var t=C(v);if(t){var u=t.getElementsByTagName(Q)[0];if(!u||(u&&typeof t.SetVariable!=b)){q=t}else{if(typeof u.SetVariable!=b){q=u}}}}return q},embedSWF:function(x,AE,AB,AD,q,w,r,z,AC){if(!h.w3cdom||!x||!AE||!AB||!AD||!q){return}AB+="";AD+="";if(c(q)){W(AE,false);var AA={};if(AC&&typeof AC===Q){for(var v in AC){if(AC[v]!=Object.prototype[v]){AA[v]=AC[v]}}}AA.data=x;AA.width=AB;AA.height=AD;var y={};if(z&&typeof z===Q){for(var u in z){if(z[u]!=Object.prototype[u]){y[u]=z[u]}}}if(r&&typeof r===Q){for(var t in r){if(r[t]!=Object.prototype[t]){if(typeof y.flashvars!=b){y.flashvars+="&"+t+"="+r[t]}else{y.flashvars=t+"="+r[t]}}}}f(function(){U(AA,y,AE);if(AA.id==AE){W(AE,true)}})}else{if(w&&!A&&c("6.0.65")&&(h.win||h.mac)){A=true;W(AE,false);f(function(){var AF={};AF.id=AF.altContentId=AE;AF.width=AB;AF.height=AD;AF.expressInstall=w;k(AF)})}}},getFlashPlayerVersion:function(){return{major:h.pv[0],minor:h.pv[1],release:h.pv[2]}},hasFlashPlayerVersion:c,createSWF:function(t,r,q){if(h.w3cdom){return U(t,r,q)}else{return undefined}},removeSWF:function(q){if(h.w3cdom){X(q)}},createCSS:function(r,q){if(h.w3cdom){V(r,q)}},addDomLoadEvent:f,addLoadEvent:R,getQueryParamValue:function(v){var u=K.location.search||K.location.hash;if(v==null){return g(u)}if(u){var t=u.substring(1).split("&");for(var r=0;r<t.length;r++){if(t[r].substring(0,t[r].indexOf("="))==v){return g(t[r].substring((t[r].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(A&&M){var q=C(m);if(q){q.parentNode.replaceChild(M,q);if(l){W(l,true);if(h.ie&&h.win){M.style.display="block"}}M=null;l=null;A=false}}}}}();
/*!
 * jQuery Form Plugin
 * version: 2.73 (03-MAY-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(b){b.fn.ajaxSubmit=function(u){if(!this.length){a("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof u=="function"){u={success:u}}var i=this.attr("action");var d=(typeof i==="string")?b.trim(i):"";if(d){d=(d.match(/^([^#]+)/)||[])[1]}d=d||window.location.href||"";u=b.extend(true,{url:d,success:b.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},u);var w={};this.trigger("form-pre-serialize",[this,u,w]);if(w.veto){a("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(u.beforeSerialize&&u.beforeSerialize(this,u)===false){a("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var g,r,o=this.formToArray(u.semantic);if(u.data){u.extraData=u.data;for(g in u.data){if(u.data[g] instanceof Array){for(var j in u.data[g]){o.push({name:g,value:u.data[g][j]})}}else{r=u.data[g];r=b.isFunction(r)?r():r;o.push({name:g,value:r})}}}if(u.beforeSubmit&&u.beforeSubmit(o,this,u)===false){a("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[o,this,u,w]);if(w.veto){a("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var c=b.param(o);if(u.type.toUpperCase()=="GET"){u.url+=(u.url.indexOf("?")>=0?"&":"?")+c;u.data=null}else{u.data=c}var t=this,m=[];if(u.resetForm){m.push(function(){t.resetForm()})}if(u.clearForm){m.push(function(){t.clearForm()})}if(!u.dataType&&u.target){var s=u.success||function(){};m.push(function(n){var k=u.replaceTarget?"replaceWith":"html";b(u.target)[k](n).each(s,arguments)})}else{if(u.success){m.push(u.success)}}u.success=function(x,n,y){var v=u.context||u;for(var q=0,k=m.length;q<k;q++){m[q].apply(v,[x,n,y||t,t])}};var h=b("input:file",this).length>0;var f="multipart/form-data";var l=(t.attr("enctype")==f||t.attr("encoding")==f);if(u.iframe!==false&&(h||u.iframe||l)){if(u.closeKeepAlive){b.get(u.closeKeepAlive,p)}else{p()}}else{b.ajax(u)}this.trigger("form-submit-notify",[this,u]);return this;function p(){var v=t[0];if(b(":input[name=submit],:input[id=submit]",v).length){alert('Error: Form elements must not have name or id of "submit".');return}var E=b.extend(true,{},b.ajaxSettings,u);E.context=E.context||E;var H="jqFormIO"+(new Date().getTime()),B="_"+H;var y=b('<iframe id="'+H+'" name="'+H+'" src="'+E.iframeSrc+'" />');var C=y[0];y.css({position:"absolute",top:"-1000px",left:"-1000px"});var z={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var P=(n==="timeout"?"timeout":"aborted");a("aborting upload... "+P);this.aborted=1;y.attr("src",E.iframeSrc);z.error=P;E.error&&E.error.call(E.context,z,P,P);L&&b.event.trigger("ajaxError",[z,E,P]);E.complete&&E.complete.call(E.context,z,P)}};var L=E.global;if(L&&!b.active++){b.event.trigger("ajaxStart")}if(L){b.event.trigger("ajaxSend",[z,E])}if(E.beforeSend&&E.beforeSend.call(E.context,z,E)===false){if(E.global){b.active--}return}if(z.aborted){return}var K=0,D;var A=v.clk;if(A){var I=A.name;if(I&&!A.disabled){E.extraData=E.extraData||{};E.extraData[I]=A.value;if(A.type=="image"){E.extraData[I+".x"]=v.clk_x;E.extraData[I+".y"]=v.clk_y}}}function J(){var R=t.attr("target"),P=t.attr("action");v.setAttribute("target",H);if(v.getAttribute("method")!="POST"){v.setAttribute("method","POST")}if(v.getAttribute("action")!=E.url){v.setAttribute("action",E.url)}if(!E.skipEncodingOverride){t.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(E.timeout){D=setTimeout(function(){K=true;G(true)},E.timeout)}var Q=[];try{if(E.extraData){for(var S in E.extraData){Q.push(b('<input type="hidden" name="'+S+'" value="'+E.extraData[S]+'" />').appendTo(v)[0])}}y.appendTo("body");C.attachEvent?C.attachEvent("onload",G):C.addEventListener("load",G,false);v.submit()}finally{v.setAttribute("action",P);if(R){v.setAttribute("target",R)}else{t.removeAttr("target")}b(Q).remove()}}if(E.forceSync){J()}else{setTimeout(J,10)}var N,O,M=50,x;function G(U){if(z.aborted||x){return}if(U===true&&z){z.abort("timeout");return}var T=C.contentWindow?C.contentWindow.document:C.contentDocument?C.contentDocument:C.document;if(!T||T.location.href==E.iframeSrc){if(!K){return}}C.detachEvent?C.detachEvent("onload",G):C.removeEventListener("load",G,false);var Q=true;try{if(K){throw"timeout"}var V=E.dataType=="xml"||T.XMLDocument||b.isXMLDoc(T);a("isXml="+V);if(!V&&window.opera&&(T.body==null||T.body.innerHTML=="")){if(--M){a("requeing onLoad callback, DOM not available");setTimeout(G,250);return}}z.responseText=T.body?T.body.innerHTML:T.documentElement?T.documentElement.innerHTML:null;z.responseXML=T.XMLDocument?T.XMLDocument:T;if(V){E.dataType="xml"}z.getResponseHeader=function(X){var W={"content-type":E.dataType};return W[X]};var S=/(json|script|text)/.test(E.dataType);if(S||E.textarea){var P=T.getElementsByTagName("textarea")[0];if(P){z.responseText=P.value}else{if(S){var R=T.getElementsByTagName("pre")[0];var n=T.getElementsByTagName("body")[0];if(R){z.responseText=R.textContent}else{if(n){z.responseText=n.innerHTML}}}}}else{if(E.dataType=="xml"&&!z.responseXML&&z.responseText!=null){z.responseXML=F(z.responseText)}}N=k(z,E.dataType,E)}catch(U){a("error caught:",U);Q=false;z.error=U;E.error&&E.error.call(E.context,z,"error",U);L&&b.event.trigger("ajaxError",[z,E,U])}if(z.aborted){a("upload aborted");Q=false}if(Q){E.success&&E.success.call(E.context,N,"success",z);L&&b.event.trigger("ajaxSuccess",[z,E])}L&&b.event.trigger("ajaxComplete",[z,E]);if(L&&!--b.active){b.event.trigger("ajaxStop")}E.complete&&E.complete.call(E.context,z,Q?"success":"error");x=true;if(E.timeout){clearTimeout(D)}setTimeout(function(){y.removeData("form-plugin-onload");y.remove();z.responseXML=null},100)}var F=b.parseXML||function(n,P){if(window.ActiveXObject){P=new ActiveXObject("Microsoft.XMLDOM");P.async="false";P.loadXML(n)}else{P=(new DOMParser()).parseFromString(n,"text/xml")}return(P&&P.documentElement&&P.documentElement.nodeName!="parsererror")?P:null};var q=b.parseJSON||function(n){return window["eval"]("("+n+")")};var k=function(T,R,Q){var P=T.getResponseHeader("content-type")||"",n=R==="xml"||!R&&P.indexOf("xml")>=0,S=n?T.responseXML:T.responseText;if(n&&S.documentElement.nodeName==="parsererror"){b.error&&b.error("parsererror")}if(Q&&Q.dataFilter){S=Q.dataFilter(S,R)}if(typeof S==="string"){if(R==="json"||!R&&P.indexOf("json")>=0){S=q(S)}else{if(R==="script"||!R&&P.indexOf("javascript")>=0){b.globalEval(S)}}}return S}}};b.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};if(!b.isReady&&d.s){a("DOM not ready, queuing ajaxForm");b(function(){b(d.s,d.c).ajaxForm(c)});return this}a("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();b(this).ajaxSubmit(c)}}).bind("click.form-plugin",function(j){var i=j.target;var g=b(i);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length==0){return}i=f[0]}var h=this;h.clk=i;if(i.type=="image"){if(j.offsetX!=undefined){h.clk_x=j.offsetX;h.clk_y=j.offsetY}else{if(typeof b.fn.offset=="function"){var k=g.offset();h.clk_x=j.pageX-k.left;h.clk_y=j.pageY-k.top}else{h.clk_x=j.pageX-i.offsetLeft;h.clk_y=j.pageY-i.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(r){var q=[];if(this.length===0){return q}var d=this[0];var h=r?d.getElementsByTagName("*"):d.elements;if(!h){return q}var l,k,g,s,f,o,c;for(l=0,o=h.length;l<o;l++){f=h[l];g=f.name;if(!g){continue}if(r&&d.clk&&f.type=="image"){if(!f.disabled&&d.clk==f){q.push({name:g,value:b(f).val()});q.push({name:g+".x",value:d.clk_x},{name:g+".y",value:d.clk_y})}continue}s=b.fieldValue(f,true);if(s&&s.constructor==Array){for(k=0,c=s.length;k<c;k++){q.push({name:g,value:s[k]})}}else{if(s!==null&&typeof s!="undefined"){q.push({name:g,value:s})}}}if(!r&&d.clk){var m=b(d.clk),p=m[0];g=p.name;if(g&&!p.disabled&&p.type=="image"){q.push({name:g,value:m.val()});q.push({name:g+".x",value:d.clk_x},{name:g+".y",value:d.clk_y})}}return q};b.fn.formSerialize=function(c){return b.param(this.formToArray(c))};b.fn.fieldSerialize=function(d){var c=[];this.each(function(){var j=this.name;if(!j){return}var g=b.fieldValue(this,d);if(g&&g.constructor==Array){for(var h=0,f=g.length;h<f;h++){c.push({name:j,value:g[h]})}}else{if(g!==null&&typeof g!="undefined"){c.push({name:this.name,value:g})}}});return b.param(c)};b.fn.fieldValue=function(j){for(var h=[],f=0,c=this.length;f<c;f++){var g=this[f];var d=b.fieldValue(g,j);if(d===null||typeof d=="undefined"||(d.constructor==Array&&!d.length)){continue}d.constructor==Array?b.merge(h,d):h.push(d)}return h};b.fieldValue=function(c,k){var f=c.name,q=c.type,r=c.tagName.toLowerCase();if(k===undefined){k=true}if(k&&(!f||c.disabled||q=="reset"||q=="button"||(q=="checkbox"||q=="radio")&&!c.checked||(q=="submit"||q=="image")&&c.form&&c.form.clk!=c||r=="select"&&c.selectedIndex==-1)){return null}if(r=="select"){var l=c.selectedIndex;if(l<0){return null}var o=[],d=c.options;var h=(q=="select-one");var m=(h?l+1:d.length);for(var g=(h?l:0);g<m;g++){var j=d[g];if(j.selected){var p=j.value;if(!p){p=(j.attributes&&j.attributes.value&&!(j.attributes.value.specified))?j.text:j.value}if(h){return p}o.push(p)}}return o}return b(c).val()};b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields()})};b.fn.clearFields=b.fn.clearInputs=function(){return this.each(function(){var d=this.type,c=this.tagName.toLowerCase();if(d=="text"||d=="password"||c=="textarea"){this.value=""}else{if(d=="checkbox"||d=="radio"){this.checked=false}else{if(c=="select"){this.selectedIndex=-1}}}})};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};b.fn.enable=function(c){if(c===undefined){c=true}return this.each(function(){this.disabled=!c})};b.fn.selected=function(c){if(c===undefined){c=true}return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio"){this.checked=c}else{if(this.tagName.toLowerCase()=="option"){var f=b(this).parent("select");if(c&&f[0]&&f[0].type=="select-one"){f.find("option").selected(false)}this.selected=c}}})};function a(){if(b.fn.ajaxSubmit.debug){var c="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(c)}else{if(window.opera&&window.opera.postError){window.opera.postError(c)}}}}})(jQuery);(function(b){var a;b.remotipart=a={setup:function(c){c.append(b("<input />",{id:"remotipart_submitted",type:"hidden",name:"remotipart_submitted",value:true})).bind("ajax:beforeSend.remotipart",function(g,h,d){var f=b.extend({},d);delete f.beforeSend;delete f.data;if(f.dataType===undefined){f.dataType="script"}if(b.rails.fire(c,"ajax:remotipartSubmit",[h,f])){if(f.dataType=="script"){f.url=f.url.split("?");if(f.url[0].substr(-3)!=".js"){f.url[0]+=".js"}f.url=f.url.join("?")}c.data("remotipartSubmitted",f.dataType);c.ajaxSubmit(f);return false}}).data("remotipartSubmitted",true)},teardown:function(c){c.unbind("ajax:beforeSend.remotipart").children("#remotipart_submitted").remove();delete c.data.remotipartSubmitted}};b("form").live("ajax:aborted:file",function(){var c=b(this);if(c.data("remotipartSubmitted")===undefined){a.setup(c)}if(!b.support.submitBubbles&&"callFormSubmitBindings" in b.rails&&b.rails.callFormSubmitBindings(c)===false){return b.rails.stopEverything(e)}b.rails.handleRemote(c);return false})})(jQuery);